---
title: "Vignette of the `patientSummaryVis` package"
author: "Laure Cougnaud"
date: "`r format(Sys.Date(), '%B %d, %Y')`"
output: 
  rmarkdown::html_document:
    toc: true
    toc_float:
      collapsed: true
    number_sections: true
vignette: >
  %\VignetteIndexEntry{patientSummaryVis package}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

# Introduction

```{r options, echo = FALSE}
	
	library(knitr)
	opts_chunk$set(
		echo = TRUE, results = 'asis', warning = FALSE, 
		error = FALSE, message = FALSE, cache = FALSE,
		fig.width = 8, fig.height = 7,
		fig.path = "./figures_vignette/",
		#out.width = '0.7\\textwidth', 
		fig.align = 'center')#, out.height = 0.5\\textwidth', fig.path = 'graphs/') 
	options(width = 170)#, stringsAsFactors = FALSE
	options(warn = 1)#instead of warn = 0 by default -> to have place where warnings occur in the call to Sweave function
	
```

This package `patientProfilesVis` enables to create report containing subject
profiles.

```{r loadPackages}

	library(patientSummaryVis)
	library(pander)

```

## Data format

The input dataset for the workflow should be a data.frame, 
usually loaded from a _SAS_ data file (`sas7bdat` format).
The label of the variables stored in the `SAS` datasets is also used
for title/captions. 

The function `loadDataADaMSDTM` from the `patientProfilesVis` package can be
used to load your custom `SAS` dataset(s) of interest.
In this example, the example dataset stored in the `patientProfilesVis`
package is used.

```{r loadData}	
	
	data(ADaMDataPelican)
	data(labelVarsADaMPelican)

```

# Patient summarized profile

```{r createMeanSEStats}

	# create the summary table
	summaryTable <- getSummaryStatisticsTable(
		data = subset(ADaMDataPelican, PARAMCD == "FEV1PP"),
		byAcross = "AVISIT",
		byWithin = "TRTP"
	)

	# create the plot
	gg <- subjectProfileSummaryPlot(
		data = summaryTable,
		xVar = "AVISIT",
		colorVar = "TRTP",
		labelVars = labelVarsADaMPelican
	)
	
	# format and export the table in Word format
	ft <- exportSummaryStatisticsTable(
		data = summaryTable, 
		byAcross = "AVISIT", byWithin = "TRTP",
		labelVars = labelVarsADaMPelican,
		file = "summaryStatisticsTable.docx"
	)
	ft

```

# Appendix

## Session information


```{r includeSessionInfo, echo = FALSE}

	pander(sessionInfo())

```
